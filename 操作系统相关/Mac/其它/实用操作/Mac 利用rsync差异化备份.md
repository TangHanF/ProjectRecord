## ç®€å•å¤‡ä»½

å‘½ä»¤è¡Œå¹¶ä¸ç­‰åŒäºŽå¤æ‚ï¼Œrsync çš„åŸºç¡€è¯­æ³•å°±éžå¸¸ç®€å•ï¼š

```bash
rsync -av [æºæ–‡ä»¶å¤¹è·¯å¾„] [å¤‡ä»½è·¯å¾„]
```

æŠŠä¸¤ä¸ªè·¯å¾„åæ›¿æ¢æˆä½ è‡ªå·±çš„ï¼ˆå¯ä»¥ç›´æŽ¥æ‹–åŠ¨æ–‡ä»¶å¤¹è¿› Terminal æ¥èŽ·å¾—ï¼‰ï¼Œä¹‹åŽå°±å¯ä»¥åœ¨ Terminal é‡Œæ‰§è¡Œäº†ã€‚ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ**ä¸¤æ¡è·¯å¾„æœ€åŽéœ€è¦ä»¥ / ç»“å°¾ï¼Œä¸ç„¶å®ƒä»¬ä¼šå‡ºçŽ°åœ¨è®©ä½ è§‰å¾—èŽ«åå…¶å¦™çš„åœ°æ–¹ã€‚**

æˆ‘éœ€è¦å¤‡ä»½éŸ³ä¹æ–‡ä»¶å¤¹åˆ° Uç›˜ï¼Œå°±å¯ä»¥ç”¨ `rsync -av /Users/apple/Music/ /Volumes/Min\'s/music/`ã€‚

![rsync](https://ws2.sinaimg.cn/large/006tNc79ly1ftt2dafdiuj30v40opgmp.jpg)

ä½ ä¼šæ³¨æ„çš„ä¸€äº›ä¹±ç ï¼Œè¿™æ˜¯ç”±äºŽéƒ¨åˆ†éŸ³ä¹æ–‡ä»¶åå¸¦æœ‰ä¸­æ–‡æˆ–æ—¥æ–‡ï¼Œä¸èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œä½†ä¸ä¼šå½±å“å¤‡ä»½æ•ˆæžœã€‚

rsync çš„å·®å¼‚ç®—æ³•éžå¸¸ç®¡ç”¨ï¼Œå³ä½¿æ–‡ä»¶åæ²¡æœ‰æ”¹åŠ¨ï¼Œå®ƒä¹Ÿä¼šå¤‡ä»½æœ‰è¿‡æ”¹åŠ¨çš„æ–‡ä»¶ã€‚æˆ‘ç»å¸¸ä¸ºéŸ³é¢‘æ›´æ¢ä¸“è¾‘å°é¢ã€æ·»åŠ  tagï¼Œè¿‡åŽ»å¤‡ä»½æ—¶éœ€è¦æŒ‰ç…§ä¿®æ”¹æ—¶é—´æŽ’åˆ—ã€æ‰‹å·¥é€‰å‡ºè¿‘æœŸæ”¹åŠ¨çš„æ–‡ä»¶ï¼Œç¹çç¨‹åº¦å¯æƒ³è€ŒçŸ¥ï¼Œæ¢ rsync å°±çœä¸‹ä¸€å¤§ç¬”åŠ›æ°”ã€‚

ðŸš®**åˆ é™¤å¤šä½™æ–‡ä»¶**

æœ€ç®€å•çš„ rsync åªä¼šåšåŠ æ³•ï¼Œä½†é‚£äº›åœ¨æºæ–‡ä»¶å¤¹é‡Œåˆ æŽ‰çš„æ–‡ä»¶ï¼Œæˆ‘ä¸æƒ³åŽ»å¤‡ä»½æ–‡ä»¶å¤¹é‡Œå†åˆ ä¸€éã€‚`--delete`å‚æ•°å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼š

```
rsync -av [æºæ–‡ä»¶å¤¹è·¯å¾„] [å¤‡ä»½è·¯å¾„] --delete
```

åœ¨æœ«ä½æ·»åŠ è¿™ä¸€ä¸²å‚æ•°åŽï¼Œå¦‚æžœåˆ é™¤äº†æºæ–‡ä»¶å¤¹é‡Œçš„æŸäº›ä¸œè¥¿ï¼Œå¤‡ä»½ä¸­çš„å¯¹åº”æ–‡ä»¶ä¹Ÿä¼šä¹–ä¹–æ¶ˆå¤±ã€‚

ðŸ™…**ä¸æƒ³å¤‡ä»½ç‰¹å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹**

åœ¨å¤‡ä»½éŸ³ä¹æ–‡ä»¶å¤¹æ—¶ï¼Œæˆ‘å‘çŽ°é‡Œé¢çš„ iTunes æ–‡ä»¶å¤¹ä¹Ÿæ··äº†è¿›åŽ»ï¼Œä½†æ˜¯æˆ‘ä¸éœ€è¦è¿™ä¸ªä¸œè¥¿ã€‚å¯ä»¥ç”¨ `--exclude "æƒ³è¦æŽ’é™¤çš„æ–‡ä»¶"` è¿™ä¸²å‚æ•°æ¥é¿å¼€å®ƒï¼š

```
rsync -av [æºæ–‡ä»¶å¤¹è·¯å¾„] [å¤‡ä»½è·¯å¾„] --delete --exclude "æƒ³è¦æŽ’é™¤çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹"
```

æ¯”å¦‚æˆ‘å°±åŠ äº† `--exclude "iTunes"` æ¥é¿å…åŒæ­¥ iTunes æ–‡ä»¶å¤¹ã€‚æ–‡ä»¶åä¹‹åŽè®°å¾—å¸¦ä¸Šæ‹“å±•åï¼Œå°¾å·´ä¸è¦è½ä¸‹ã€‚å¦‚æžœæ˜¯æ–‡ä»¶å¤¹ï¼Œå°±ä¸éœ€è¦å¸¦æ‹“å±•åã€‚

## ä¸€é”®å¤‡ä»½ã€æ¢å¤

å‘½ä»¤è™½å¥½ï¼Œä½†æ¯æ¬¡è¾“å…¥å¤ªéº»çƒ¦ï¼Œå¤‡ä»½å¤šä¸ªæ–‡ä»¶å¤¹æ›´æˆäº†å™©æ¢¦ã€‚åšä¸€ä¸ªè„šæœ¬å°±è§£å†³é—®é¢˜äº†ã€‚

1.æ‰“å¼€ Automatorï¼Œæ–°å»ºä¸€ä¸ªã€Œåº”ç”¨ç¨‹åºã€ï¼Œæ·»åŠ ä¸€ä¸ªã€Œè¿è¡Œ Shell è„šæœ¬ã€æ­¥éª¤ï¼›

2.æŠŠåˆšæ‰æµ‹è¯•æˆåŠŸçš„å‘½ä»¤ç²˜è´´è¿›åŽ»ã€‚æƒ³å¤‡ä»½å¤šä¸ªæ–‡ä»¶å¤¹ï¼Œå°±ç²˜ä¸€æ¡æ¢ä¸€è¡Œï¼Œå®ƒä»¬ä¼šä¾æ¬¡æ‰§è¡Œï¼›

![automator](https://ws2.sinaimg.cn/large/006tNc79ly1ftt2dpr8h7j30v40o1403.jpg)automator

3.ä¿å­˜å¥½åˆšæ‰åˆ¶ä½œçš„åº”ç”¨ç¨‹åºï¼Œæ”¾åœ¨æ–¹ä¾¿å–ç”¨çš„åœ°æ–¹ã€‚

ä»¥åŽéœ€è¦å¤‡ä»½çš„è¯ï¼ŒåŒå‡»å®ƒå°±å®Œæˆäº†ðŸ‘ã€‚

è‡³äºŽæ¢å¤å¤‡ä»½çš„åº”ç”¨ç¨‹åºï¼Œåˆ¶ä½œèµ·æ¥ä¹Ÿä¸éš¾ï¼Œåªéœ€è¦æŠŠæºæ–‡ä»¶å¤¹è·¯å¾„ä¸Žå¤‡ä»½è·¯å¾„æ¢ä¸€ä¸‹ã€‚æ­¤æ—¶ä½ æœ€å¥½æ…Žç”¨ `--delete` å‚æ•°ï¼Œé™ä½Žä¸¢å¤±æ–‡ä»¶çš„é£Žé™©ã€‚

## å®šæ—¶å¤‡ä»½

è¿˜è®°å¾—ç”¨æ—¥åŽ†å¯åŠ¨å®šæ—¶ä»»åŠ¡çš„æŠ€å·§å—ï¼Ÿä½ å½“ç„¶å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•å¯åŠ¨å®šæ—¶å¤‡ä»½äº†ã€‚

![æŠŠæé†’æ¢æˆæ‰“å¼€ç¨‹åº](https://ws2.sinaimg.cn/large/006tNc79ly1ftt2fkpws9j30v40js409.jpg)æŠŠæé†’æ¢æˆæ‰“å¼€ç¨‹åº

iMacã€Mac mini å¯ä»¥ç­‰é•¿æœŸé€šç”µçš„è®¾å¤‡å¯ä»¥åœ¨å¤œæ·±äººé™æ—¶è‡ªå·±å¤‡ä»½ï¼Œåˆ©ç”¨é—²ç½®æ—¶é—´ï¼Œä¸å½±å“ç™½å¤©å·¥ä½œã€‚å¯æƒœæˆ‘åœ¨å¤–ä½¿ç”¨çš„æ˜¯ç¬”è®°æœ¬ç”µè„‘ï¼Œé—²ç½®æ—¶éƒ½åœ¨ç›’ç›–ä¼‘çœ ï¼Œæ— ç¦äº«å—ã€‚

## æ€»ç»“

rsync æ–¹ä¾¿é«˜æ•ˆï¼Œçµæ´»ã€å¯å®šåˆ¶ï¼Œå’Œ Automatorã€æ—¥åŽ†é…åˆèƒ½æ»¡è¶³æ›´å¤šéœ€æ±‚ã€‚æˆ‘çŽ°åœ¨å¤‡ä»½éŸ³ä¹ã€ç…§ç‰‡å’Œ PDF éƒ½ä¼šä½¿ç”¨å®ƒã€‚

ä½†æ˜¯ç›¸æ¯” Time Machineã€Git ç­‰å·¥å…·ï¼Œrsync çš„å±€é™ä¹Ÿå¾ˆæ˜Žæ˜¾ï¼šæ²¡æœ‰ç‰ˆæœ¬è®°å½•ï¼Œä¹Ÿå°±æ²¡æœ‰ç‚«é…·çš„æ—¶å…‰æœºåŠŸèƒ½ï¼Œå¦‚æžœä½ éœ€è¦é¢‘ç¹å›žæº¯åˆ°åŽ†å²ç‰ˆæœ¬â€”â€”å°¤å…¶å½“ä½ ä»Žäº‹ç¼–ç¨‹æˆ–è®¾è®¡ç­‰å·¥ä½œæ—¶â€”â€”rsync ä¸æ˜¯ä¸€ä¸ªå¥½é€‰æ‹©ã€‚ä½†ä¸ä¿å­˜è¿™äº›åŽ†å²è®°å½•ä¹Ÿå°±æ›´çœç©ºé—´ï¼Œå°å°çš„ Uç›˜å°±è¶³å¤Ÿèƒœä»»ï¼Œäº‹å®žä¸Šï¼Œæˆ‘ä½¿ç”¨æ™®é€š Uç›˜çš„æ—¶é—´è¿œè¿œå¤šä½™æ­è½½ Time Machine çš„ç¡¬ç›˜ã€‚

å¯¹æˆ‘æ¥è¯´ï¼Œrsync æ›´é€‚åˆä¿å­˜ä¸€äº›é›¶ç¢Žçš„ã€ç§äººçš„æ–‡ä»¶ã€‚æŽ¨èæŠŠå¤‡ä»½ä½œä¸ºæ¯å‘¨ç”šè‡³æ¯æ—¥çš„ä¾‹è¡Œä»»åŠ¡ï¼Œç»™è‡ªå·±çš„æ–‡ä»¶å¤šåŠ ä¸€é“ä¿é™©ã€‚



> ```
> -v, --verbose è¯¦ç»†æ¨¡å¼è¾“å‡ºã€‚
> -q, --quiet ç²¾ç®€è¾“å‡ºæ¨¡å¼ã€‚
> -c, --checksum æ‰“å¼€æ ¡éªŒå¼€å…³ï¼Œå¼ºåˆ¶å¯¹æ–‡ä»¶ä¼ è¾“è¿›è¡Œæ ¡éªŒã€‚
> -a, --archive å½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºä»¥é€’å½’æ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¿æŒæ‰€æœ‰æ–‡ä»¶å±žæ€§ï¼Œç­‰äºŽ-rlptgoDã€‚
> -r, --recursive å¯¹å­ç›®å½•ä»¥é€’å½’æ¨¡å¼å¤„ç†ã€‚
> -R, --relative ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä¿¡æ¯ã€‚
> -b, --backup åˆ›å»ºå¤‡ä»½ï¼Œä¹Ÿå°±æ˜¯å¯¹äºŽç›®çš„å·²ç»å­˜åœ¨æœ‰åŒæ ·çš„æ–‡ä»¶åæ—¶ï¼Œå°†è€çš„æ–‡ä»¶é‡æ–°å‘½åä¸º~filenameã€‚å¯ä»¥ä½¿ç”¨--suffixé€‰é¡¹æ¥æŒ‡å®šä¸åŒçš„å¤‡ä»½æ–‡ä»¶å‰ç¼€ã€‚
> --backup-dir å°†å¤‡ä»½æ–‡ä»¶(å¦‚~filename)å­˜æ”¾åœ¨åœ¨ç›®å½•ä¸‹ã€‚
> -suffix=SUFFIX å®šä¹‰å¤‡ä»½æ–‡ä»¶å‰ç¼€ã€‚
> -u, --update ä»…ä»…è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡æ‰€æœ‰å·²ç»å­˜åœ¨äºŽDSTï¼Œå¹¶ä¸”æ–‡ä»¶æ—¶é—´æ™šäºŽè¦å¤‡ä»½çš„æ–‡ä»¶ï¼Œä¸è¦†ç›–æ›´æ–°çš„æ–‡ä»¶ã€‚
> -l, --links ä¿ç•™è½¯é“¾ç»“ã€‚
> -L, --copy-links æƒ³å¯¹å¾…å¸¸è§„æ–‡ä»¶ä¸€æ ·å¤„ç†è½¯é“¾ç»“ã€‚
> --copy-unsafe-links ä»…ä»…æ‹·è´æŒ‡å‘SRCè·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾ç»“ã€‚
> --safe-links å¿½ç•¥æŒ‡å‘SRCè·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾ç»“ã€‚
> -H, --hard-links ä¿ç•™ç¡¬é“¾ç»“ã€‚
> -p, --perms ä¿æŒæ–‡ä»¶æƒé™ã€‚
> -o, --owner ä¿æŒæ–‡ä»¶å±žä¸»ä¿¡æ¯ã€‚
> -g, --group ä¿æŒæ–‡ä»¶å±žç»„ä¿¡æ¯ã€‚
> -D, --devices ä¿æŒè®¾å¤‡æ–‡ä»¶ä¿¡æ¯ã€‚
> -t, --times ä¿æŒæ–‡ä»¶æ—¶é—´ä¿¡æ¯ã€‚
> -S, --sparse å¯¹ç¨€ç–æ–‡ä»¶è¿›è¡Œç‰¹æ®Šå¤„ç†ä»¥èŠ‚çœDSTçš„ç©ºé—´ã€‚
> -n, --dry-runçŽ°å®žå“ªäº›æ–‡ä»¶å°†è¢«ä¼ è¾“ã€‚
> -w, --whole-file æ‹·è´æ–‡ä»¶ï¼Œä¸è¿›è¡Œå¢žé‡æ£€æµ‹ã€‚
> -x, --one-file-system ä¸è¦è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œã€‚
> -B, --block-size=SIZE æ£€éªŒç®—æ³•ä½¿ç”¨çš„å—å°ºå¯¸ï¼Œé»˜è®¤æ˜¯700å­—èŠ‚ã€‚
> -e, --rsh=command æŒ‡å®šä½¿ç”¨rshã€sshæ–¹å¼è¿›è¡Œæ•°æ®åŒæ­¥ã€‚
> --rsync-path=PATH æŒ‡å®šè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„rsyncå‘½ä»¤æ‰€åœ¨è·¯å¾„ä¿¡æ¯ã€‚
> -C, --cvs-exclude ä½¿ç”¨å’ŒCVSä¸€æ ·çš„æ–¹æ³•è‡ªåŠ¨å¿½ç•¥æ–‡ä»¶ï¼Œç”¨æ¥æŽ’é™¤é‚£äº›ä¸å¸Œæœ›ä¼ è¾“çš„æ–‡ä»¶ã€‚
> --existing ä»…ä»…æ›´æ–°é‚£äº›å·²ç»å­˜åœ¨äºŽDSTçš„æ–‡ä»¶ï¼Œè€Œä¸å¤‡ä»½é‚£äº›æ–°åˆ›å»ºçš„æ–‡ä»¶ã€‚
> --delete åˆ é™¤é‚£äº›DSTä¸­SRCæ²¡æœ‰çš„æ–‡ä»¶ã€‚
> --delete-excluded åŒæ ·åˆ é™¤æŽ¥æ”¶ç«¯é‚£äº›è¢«è¯¥é€‰é¡¹æŒ‡å®šæŽ’é™¤çš„æ–‡ä»¶ã€‚
> --delete-after ä¼ è¾“ç»“æŸä»¥åŽå†åˆ é™¤ã€‚
> --ignore-errors åŠæ—¶å‡ºçŽ°IOé”™è¯¯ä¹Ÿè¿›è¡Œåˆ é™¤ã€‚
> --max-delete=NUM æœ€å¤šåˆ é™¤NUMä¸ªæ–‡ä»¶ã€‚
> --partial ä¿ç•™é‚£äº›å› æ•…æ²¡æœ‰å®Œå…¨ä¼ è¾“çš„æ–‡ä»¶ï¼Œä»¥æ˜¯åŠ å¿«éšåŽçš„å†æ¬¡ä¼ è¾“ã€‚
> --force å¼ºåˆ¶åˆ é™¤ç›®å½•ï¼Œå³ä½¿ä¸ä¸ºç©ºã€‚
> --numeric-ids ä¸å°†æ•°å­—çš„ç”¨æˆ·å’Œç»„idåŒ¹é…ä¸ºç”¨æˆ·åå’Œç»„åã€‚
> --timeout=time ipè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚
> -I, --ignore-times ä¸è·³è¿‡é‚£äº›æœ‰åŒæ ·çš„æ—¶é—´å’Œé•¿åº¦çš„æ–‡ä»¶ã€‚
> --size-only å½“å†³å®šæ˜¯å¦è¦å¤‡ä»½æ–‡ä»¶æ—¶ï¼Œä»…ä»…å¯Ÿçœ‹æ–‡ä»¶å¤§å°è€Œä¸è€ƒè™‘æ–‡ä»¶æ—¶é—´ã€‚
> --modify-window=NUM å†³å®šæ–‡ä»¶æ˜¯å¦æ—¶é—´ç›¸åŒæ—¶ä½¿ç”¨çš„æ—¶é—´æˆ³çª—å£ï¼Œé»˜è®¤ä¸º0ã€‚
> -T --temp-dir=DIR åœ¨DIRä¸­åˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚
> --compare-dest=DIR åŒæ ·æ¯”è¾ƒDIRä¸­çš„æ–‡ä»¶æ¥å†³å®šæ˜¯å¦éœ€è¦å¤‡ä»½ã€‚
> -P ç­‰åŒäºŽ --partialã€‚
> --progress æ˜¾ç¤ºå¤‡ä»½è¿‡ç¨‹ã€‚
> -z, --compress å¯¹å¤‡ä»½çš„æ–‡ä»¶åœ¨ä¼ è¾“æ—¶è¿›è¡ŒåŽ‹ç¼©å¤„ç†ã€‚
> --exclude=PATTERN æŒ‡å®šæŽ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼ã€‚
> --include=PATTERN æŒ‡å®šä¸æŽ’é™¤è€Œéœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼ã€‚
> --exclude-from=FILE æŽ’é™¤FILEä¸­æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶ã€‚
> --include-from=FILE ä¸æŽ’é™¤FILEæŒ‡å®šæ¨¡å¼åŒ¹é…çš„æ–‡ä»¶ã€‚
> --version æ‰“å°ç‰ˆæœ¬ä¿¡æ¯ã€‚
> --address ç»‘å®šåˆ°ç‰¹å®šçš„åœ°å€ã€‚
> --config=FILE æŒ‡å®šå…¶ä»–çš„é…ç½®æ–‡ä»¶ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„rsyncd.confæ–‡ä»¶ã€‚
> --port=PORT æŒ‡å®šå…¶ä»–çš„rsyncæœåŠ¡ç«¯å£ã€‚
> --blocking-io å¯¹è¿œç¨‹shellä½¿ç”¨é˜»å¡žIOã€‚
> -stats ç»™å‡ºæŸäº›æ–‡ä»¶çš„ä¼ è¾“çŠ¶æ€ã€‚
> --progress åœ¨ä¼ è¾“æ—¶çŽ°å®žä¼ è¾“è¿‡ç¨‹ã€‚
> --log-format=formAT æŒ‡å®šæ—¥å¿—æ–‡ä»¶æ ¼å¼ã€‚
> --password-file=FILE ä»ŽFILEä¸­å¾—åˆ°å¯†ç ã€‚
> --bwlimit=KBPS é™åˆ¶I/Oå¸¦å®½ï¼ŒKBytes per secondã€‚
> -h, --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚
> ```